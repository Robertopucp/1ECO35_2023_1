rm(list = ls())
graphics.off()
cat("\014")
library(pacman)
rm(list = ls())
graphics.off()
cat("\014")
library(pacman)
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
rm(list = ls())
graphics.off()
cat("\014")
library(pacman)
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
getwd()
p_load(readxl, tidyverse, foreign,fastDummies, haven, survey,
srvyr, labelled)
p_load(readxl, tidyverse, foreign,fastDummies, haven, survey,
srvyr, labelled)
#TAREA 4
rm(list = ls())
graphics.off()
cat("\014")
options(scipen = 999)
library(pacman)
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
getwd()
# permite llamar a varias librerias de manera simultánea
# Si la librería no está instalada, entonces lo instala y llama para su uso
p_load(readxl, tidyverse, foreign,fastDummies, haven, survey,
srvyr, labelled)
#TAREA 4
rm(list = ls())
graphics.off()
cat("\014")
options(scipen = 999)
library(pacman)
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
rm(list = ls())
graphics.off()
cat("\014")
options(scipen = 999)
library(pacman)
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
getwd()
p_load(readxl, tidyverse, foreign,fastDummies, haven, survey,
srvyr, labelled)
#TAREA 4
rm(list = ls())
graphics.off()
cat("\014")
options(scipen = 999)
library(pacman)
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
getwd()
# permite llamar a varias librerias de manera simultánea
# Si la librería no está instalada, entonces lo instala y llama para su uso
p_load(readxl, tidyverse, foreign,fastDummies, haven, survey,
srvyr, labelled)
#TAREA 4
#PARTE EN R Y PYTHON
#PARTE SOLO EN R
#ENAHO
rm(list = ls())
graphics.off()
cat("\014")
options(scipen = 999)
library(pacman)
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
getwd()
# permite llamar a varias librerias de manera simultánea
p_load(readxl, tidyverse, foreign,fastDummies, haven, survey,
srvyr, labelled)
df1 <- data.frame(
id = 1:5,
color = c("red", "blue", "green", NA, "red"),
size = c("small", "large", "medium", "medium", "small"),
type = c("A", "B", "C", NA, "A")
)
df2 <- data.frame(
id = c(2,3,4,10,20,30),
value = c(1000, 2000, 3000,4000,5000,6000)
)
df1 |>
full_join(df2, by = "id")
df1 |>
inner_join(df2, by = "id")
data <- df1 |>
left_join(df2, by = "id")
rm(list = ls())
graphics.off()
cat("\014")
options(scipen = 999)
library(pacman)
# permite llamar a varias librerias de manera simultánea
p_load(readxl, tidyverse, foreign,fastDummies, haven, survey,
srvyr, labelled)
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
getwd()
enaho200_19 <- read_dta("../../data/enaho/enaho01-2019-200.dta")
enaho300_19 <- read_dta("../../data/enaho/enaho01a-2019-300.dta")
enaho19 <- enaho200_19 %>%
full_join(enaho300_19, by = c("conglome","vivienda","hogar","codperso"))
nrow(enaho19)
enaho191 <- enaho200_19 %>%
left_join(enaho300_19, by = c("conglome","vivienda","hogar","codperso"))
nrow(enaho191)
TAREA 4
#TAREA 4
#PARTE EN R Y PYTHON
#PARTE SOLO EN R
#ENAHO
rm(list = ls())
graphics.off()
cat("\014")
options(scipen = 999)
library(pacman)
# permite llamar a varias librerias de manera simultánea
p_load(readxl, tidyverse, foreign,fastDummies, haven, survey,
srvyr, labelled)
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
getwd()
#Unimos las bases de datos
#Módulos 200 (información siodemográfica de los miembros del hogar) y
#300 (información educativa de los miembros del hogar) del año 2019
enaho200_19 <- read_dta("../../data/enaho/enaho01-2019-200.dta")
enaho300_19 <- read_dta("../../data/enaho/enaho01a-2019-300.dta")
enaho19 <- enaho200_19 %>%
left_join(enaho300_19, by = c("conglome","vivienda","hogar","codperso"))
nrow(enaho19)
attr(enaho19$p301a, 'label')
attr(enaho19$p301a, 'labels')
attr(enaho19$p301b, 'labels')
attr(enaho19$p301c, 'labels')
attr(enaho19$p301b, 'labels')
attr(enaho19$p301b, 'label')
attr(enaho19$p301c, 'label')
# años de educación #
# años de estudio acumulado hasta el nivel educativo alcanzado
enaho19 <- enaho19 %>% mutate(
educ1 = case_when(
between(p301a,1,4) ~ 0,
between(p301a,5,6) ~ 6,
between(p301a,7,10) ~ 11,
p301a == 11 ~ 16
))
# Años de estudio en el nivel educativo actual
# Sumamos el grado o año de estudios. Grado para secundaria o primaria
# año de estudio para educación superior
enaho19$educ2 <- apply(enaho19[,c("p301b","p301c")], 1 , sum , na.rm = T)
enaho19$years_educ <- apply(enaho19[,c("educ1","educ2")], 1 , sum , na.rm = T)
rm(list = ls())
graphics.off()
cat("\014")
options(scipen = 999)
library(pacman)
# permite llamar a varias librerias de manera simultánea
p_load(readxl, tidyverse, foreign,fastDummies, haven, survey,
srvyr, labelled)
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
getwd()
#Unimos las bases de datos
#Módulos 200 (información siodemográfica de los miembros del hogar) y
#300 (información educativa de los miembros del hogar) del año 2019
enaho200_19 <- read_dta("../../data/enaho/enaho01-2019-200.dta")
enaho300_19 <- read_dta("../../data/enaho/enaho01a-2019-300.dta")
enaho19 <- enaho200_19 %>%
left_join(enaho300_19, by = c("conglome","vivienda","hogar","codperso"))
nrow(enaho19)
enaho19 %>% filter ((p204==1 & p205==2) | (p204==2 & p206==1))
nrow(enaho19)
View(enaho19)
rm(list = ls())
graphics.off()
cat("\014")
options(scipen = 999)
library(pacman)
# permite llamar a varias librerias de manera simultánea
p_load(readxl, tidyverse, foreign,fastDummies, haven, survey,
srvyr, labelled)
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
getwd()
#Unimos las bases de datos
#Módulos 200 (información siodemográfica de los miembros del hogar) y
#300 (información educativa de los miembros del hogar) del año 2019
enaho200_19 <- read_dta("../../data/enaho/enaho01-2019-200.dta")
enaho300_19 <- read_dta("../../data/enaho/enaho01a-2019-300.dta")
#Utilizamos left join
enaho19 <- enaho200_19 %>%
full_join(enaho300_19, by = c("conglome","vivienda","hogar","codperso"))
View(enaho19)
#TAREA 4
#PARTE EN R Y PYTHON
#PARTE SOLO EN R
#ENAHO
rm(list = ls())
graphics.off()
cat("\014")
options(scipen = 999)
library(pacman)
# permite llamar a varias librerias de manera simultánea
p_load(readxl, tidyverse, foreign,fastDummies, haven, survey,
srvyr, labelled)
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
getwd()
#Unimos las bases de datos
#Módulos 200 (información siodemográfica de los miembros del hogar) y
#300 (información educativa de los miembros del hogar) del año 2019
enaho200_19 <- read_dta("../../../../datos/enaho01-2019-200.dta")
enaho300_19 <- read_dta("../../../../datos/enaho01a-2019-300.dta")
enaho19 <- enaho200_19 %>%
full_join(enaho300_19, by = c("conglome","vivienda","hogar","codperso"))
nrow(enaho19)
enaho19 %>% filter ((p204==1 & p205==2) | (p204==2 & p206==1))
View(enaho19)
enaho19 %>% filter ((p204.x==1 & p205==2) | (p204==2 & p206==1))
enaho19 %>% filter ((p204.x==1 & p205.x==2) | (p204.x==2 & p206==1))
enaho19 %>% filter ((p204.x==1 & p205.x==2) | (p204.x==2 & p206.x==1))
#TAREA 4
#PARTE EN R Y PYTHON
#PARTE SOLO EN R
#ENAHO
rm(list = ls())
graphics.off()
cat("\014")
options(scipen = 999)
library(pacman)
# permite llamar a varias librerias de manera simultánea
p_load(readxl, tidyverse, foreign,fastDummies, haven, survey,
srvyr, labelled)
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
getwd()
#Unimos las bases de datos
#Módulos 200 (información siodemográfica de los miembros del hogar) y
#300 (información educativa de los miembros del hogar) del año 2019
enaho200_19 <- read_dta("../../../../datos/enaho01-2019-200.dta")
enaho300_19 <- read_dta("../../../../datos/enaho01a-2019-300.dta")
enaho19 <- enaho200_19 %>%
left_join(enaho300_19, by = c("conglome","vivienda","hogar","codperso"))
View(enaho200_19)
nrow(enaho19)
View(enaho300_19)
enaho200_19 <- read_dta("../../../../datos/enaho01-2019-200.dta")
table(enaho200_19$p204)
rm(list = ls())
# clean plots
graphics.off()
# clean console
cat("\014")
# additional options
options(scipen = 999)      # No scientific notation
# Library ####
library(pacman)
# permite llamar a varias librerias de manera simultánea
# Si la librería no está instalada, entonces lo instala y llama para su uso
p_load(readxl, tidyverse, foreign,fastDummies, haven, survey,
srvyr, labelled)
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
enaho100_19 <- read_dta("../../data/enaho/enaho01-2019-100.dta")
enaho200_19 <- read_dta("../../data/enaho/enaho01-2019-200.dta")
enaho300_19 <- read_dta("../../data/enaho/enaho01a-2019-300.dta")
enaho400_19 <- read_dta("../../data/enaho/enaho01a-2019-400.dta")
enaho500_19 <- read_dta("../../data/enaho/enaho01a-2019-500.dta")
sumaria_19 <- read_dta("../../data/enaho/sumaria-2019.dta")
sumaria_20 <- read_dta("../../data/enaho/sumaria-2020.dta")
sumaria_18 <- read_dta("../../data/enaho/sumaria-2018.dta")
base_deflactores <- read_dta("../../data/enaho/deflactores_base2020_new.dta")
enaho19 <- enaho200_19 %>%
left_join(enaho300_19, by = c("conglome","vivienda","hogar","codperso")) %>%
left_join(enaho400_19, by = c("conglome","vivienda","hogar","codperso")) %>%
left_join(enaho500_19, by = c("conglome","vivienda","hogar","codperso")) %>%
left_join(enaho100_19, by = c("conglome","vivienda","hogar")) %>%
left_join(sumaria_19, by = c("conglome","vivienda","hogar"))
View(enaho19)
#PARTE SOLO EN R
#ENAHO
rm(list = ls())
graphics.off()
cat("\014")
options(scipen = 999)
library(pacman)
# permite llamar a varias librerias de manera simultánea
p_load(readxl, tidyverse, foreign,fastDummies, haven, survey,
srvyr, labelled)
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
getwd()
#Unimos las bases de datos
#Módulos 200 (información siodemográfica de los miembros del hogar) y
#300 (información educativa de los miembros del hogar) del año 2019
enaho200_19 <- read_dta("../../../../datos/enaho01-2019-200.dta")
enaho300_19 <- read_dta("../../../../datos/enaho01a-2019-300.dta")
#Utilizamos left join
enaho19 <- enaho200_19 %>%
left_join(enaho300_19, by = c("conglome","vivienda","hogar","codperso"))
View(enaho200_19)
View(enaho19)
View(enaho300_19)
rm(list = ls())
# clean plots
graphics.off()
# clean console
cat("\014")
# additional options
options(scipen = 999)      # No scientific notation
library(pacman)
p_load(readxl, tidyverse, foreign,fastDummies, haven, survey,
srvyr, labelled)
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
# Cuando alguna de las variables del condicional es missing
# la dummy toma el valor NA  ( Esto es diferente en python y stata )
### Merge ENAHO ------------------------------
enaho100_19 <- read_dta("../../data/enaho/enaho01-2019-100.dta")
enaho200_19 <- read_dta("../../data/enaho/enaho01-2019-200.dta")
enaho300_19 <- read_dta("../../data/enaho/enaho01a-2019-300.dta")
enaho400_19 <- read_dta("../../data/enaho/enaho01a-2019-400.dta")
enaho500_19 <- read_dta("../../data/enaho/enaho01a-2019-500.dta")
sumaria_19 <- read_dta("../../data/enaho/sumaria-2019.dta")
sumaria_20 <- read_dta("../../data/enaho/sumaria-2020.dta")
sumaria_18 <- read_dta("../../data/enaho/sumaria-2018.dta")
base_deflactores <- read_dta("../../data/enaho/deflactores_base2020_new.dta")
enaho19 <- enaho200_19 %>%
full_join(enaho500_19, by = c("conglome","vivienda","hogar","codperso"))
View(enaho19)
enaho19 <- enaho200_19 %>%
left_join(enaho300_19, by = c("conglome","vivienda","hogar","codperso")) %>%
left_join(enaho400_19, by = c("conglome","vivienda","hogar","codperso")) %>%
left_join(enaho500_19, by = c("conglome","vivienda","hogar","codperso")) %>%
left_join(enaho100_19, by = c("conglome","vivienda","hogar")) %>%
left_join(sumaria_19, by = c("conglome","vivienda","hogar"))
View(enaho19)
rm(list = ls())
graphics.off()
cat("\014")
options(scipen = 999)
library(pacman)
# permite llamar a varias librerias de manera simultánea
p_load(readxl, tidyverse, foreign,fastDummies, haven, survey,
srvyr, labelled)
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
getwd()
#Unimos las bases de datos
#Módulos 200 (información siodemográfica de los miembros del hogar) y
#300 (información educativa de los miembros del hogar) del año 2019
enaho200_19 <- read_dta("../../../../datos/enaho01-2019-200.dta")
enaho300_19 <- read_dta("../../../../datos/enaho01a-2019-300.dta")
#Utilizamos left join
enaho19 <- enaho200_19 %>%
left_join(enaho300_19, by = c("conglome","vivienda","hogar","codperso"))
nrow(enaho19)
View(enaho19)
#TAREA 4
#PARTE EN R Y PYTHON
#PARTE SOLO EN R
#ENAHO
rm(list = ls())
graphics.off()
cat("\014")
options(scipen = 999)
library(pacman)
# permite llamar a varias librerias de manera simultánea
p_load(readxl, tidyverse, foreign,fastDummies, haven, survey,
srvyr, labelled)
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
getwd()
#Unimos las bases de datos
#Módulos 200 (información siodemográfica de los miembros del hogar) y
#300 (información educativa de los miembros del hogar) del año 2019
enaho200_19 <- read_dta("../../../../datos/enaho01-2019-200.dta")
enaho300_19 <- read_dta("../../../../datos/enaho01a-2019-300.dta")
enaho19 <- enaho200_19 %>%
left_join(enaho300_19, by = c("conglome","vivienda","hogar","codperso"))
View(enaho19)
enaho19 %>% filter ((p204==1 & p205==2) | (p204==2 & p206==1))
enaho19 <- enaho200_19 %>%
inner(enaho300_19, by = c("conglome","vivienda","hogar","codperso"))
rm(list = ls())
graphics.off()
cat("\014")
options(scipen = 999)
library(pacman)
# permite llamar a varias librerias de manera simultánea
p_load(readxl, tidyverse, foreign,fastDummies, haven, survey,
srvyr, labelled)
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
getwd()
#Unimos las bases de datos
#Módulos 200 (información siodemográfica de los miembros del hogar) y
#300 (información educativa de los miembros del hogar) del año 2019
enaho200_19 <- read_dta("../../../../datos/enaho01-2019-200.dta")
enaho300_19 <- read_dta("../../../../datos/enaho01a-2019-300.dta")
rm(list = ls())
graphics.off()
cat("\014")
options(scipen = 999)
library(pacman)
# permite llamar a varias librerias de manera simultánea
p_load(readxl, tidyverse, foreign,fastDummies, haven, survey,
srvyr, labelled)
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
getwd()
#Unimos las bases de datos
#Módulos 200 (información siodemográfica de los miembros del hogar) y
#300 (información educativa de los miembros del hogar) del año 2019
enaho200_19 <- read_dta("../../../../datos/enaho01-2019-200.dta")
enaho300_19 <- read_dta("../../../../datos/enaho01a-2019-300.dta")
View(enaho200_19)
enaho19 <- enaho200_19 %>%
left_join(enaho300_19, by = c("conglome","vivienda","hogar","codperso"))
View(enaho19)
